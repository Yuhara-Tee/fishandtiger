<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday! (Fish & Tiger)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&family=Mali:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background: #ffe3e3; /* Light pink background */
            overflow: hidden; /* Prevent scrolling */
            touch-action: manipulation;
            margin: 0;
            padding: 0;
        }
        
        h1, h2, h3, .hand-font {
            font-family: 'Mali', cursive;
        }

        /* --- Animations --- */
        .fade-out {
            opacity: 0;
            transform: scale(1.1);
            transition: opacity 0.8s ease, transform 0.8s ease;
            pointer-events: none;
        }
        
        .fade-in {
            animation: fadeInAnim 1s ease forwards;
        }

        @keyframes fadeInAnim {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .floating {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        /* --- Photo Frame Style --- */
        .photo-frame {
            background: white;
            padding: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            transform: rotate(-2deg);
            transition: transform 0.3s ease;
        }
        .photo-frame:hover {
            transform: rotate(0deg) scale(1.02);
        }
        .photo-upload-btn {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            white-space: nowrap;
        }

        /* --- Cake Animation --- */
        .cake-container {
            position: relative;
            width: 250px;
            height: 200px;
            margin: 0 auto;
            margin-top: 60px; /* Adjust spacing */
            z-index: 10;
        }
        
        .plate {
            width: 270px;
            height: 110px;
            position: absolute;
            bottom: -10px;
            left: -10px;
            background-color: #ccc;
            border-radius: 50%;
            box-shadow: 0 2px 0 #b3b3b3, 0 4px 0 #b3b3b3, 0 5px 40px rgba(0,0,0,0.5);
        }

        .cake-body {
            position: absolute;
            bottom: 0;
            left: 25px;
            width: 200px;
            height: 100px;
        }

        .layer {
            position: absolute;
            width: 200px;
            height: 100px;
            border-radius: 50%;
            background-color: #553c2a;
            box-shadow: 0 2px 0px #6a4b35, 0 4px 0px #3e2c1f, 0 6px 0px #3e2c1f, 0 30px 40px rgba(0,0,0,0.4);
        }
        
        .layer-top { top: -30px; background-color: #7a5840; z-index: 2; box-shadow: inset 0 0 10px rgba(0,0,0,0.3); }
        .layer-middle { top: 0px; background-color: #fce4ec; z-index: 1; height: 90px; } 
        
        .icing {
            position: absolute;
            top: -32px;
            left: 0;
            width: 200px;
            height: 100px;
            background-color: #ff9fb4;
            border-radius: 50%;
            z-index: 3;
            box-shadow: inset 0 -2px 5px rgba(255,255,255,0.4);
        }
        
        .drip {
            position: absolute;
            background-color: #ff9fb4;
            width: 30px;
            height: 40px;
            border-radius: 0 0 15px 15px;
            top: 45px;
            z-index: 2;
        }
        .drip:nth-child(1) { left: 10px; height: 35px; }
        .drip:nth-child(2) { left: 40px; height: 50px; }
        .drip:nth-child(3) { left: 75px; height: 30px; }
        .drip:nth-child(4) { left: 110px; height: 45px; }
        .drip:nth-child(5) { left: 140px; height: 25px; }
        .drip:nth-child(6) { left: 165px; height: 35px; }

        /* Candle - Adjusted position to fix floating issue */
        .candle {
            background-color: #7B020B;
            width: 16px;
            height: 50px;
            border-radius: 8px / 4px;
            position: absolute;
            top: 35px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏•‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å -50px ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏±‡∏Å‡∏ö‡∏ô‡πÄ‡∏Ñ‡πâ‡∏Å */
            left: 50%;
            margin-left: -8px;
            z-index: 4;
            box-shadow: -2px 0px 0px rgba(0,0,0,0.2) inset;
        }
        .candle:before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 16px;
            height: 8px;
            border-radius: 50%;
            background-color: #ad030f;
        }

        .flame {
            position: absolute;
            background-color: orange;
            width: 15px;
            height: 35px;
            border-radius: 10px 10px 10px 10px / 25px 25px 10px 10px;
            top: -34px;
            left: 50%;
            margin-left: -7.5px;
            z-index: 10;
            box-shadow: 0 0 10px rgba(255, 165, 0, 0.5), 0 0 20px rgba(255, 165, 0, 0.5), 0 0 60px rgba(255, 165, 0, 0.5), 0 0 80px rgba(255, 165, 0, 0.5);
            transform-origin: 50% 90%;
            animation: flicker 1s ease-in-out alternate infinite;
            display: none; /* Hidden until lit */
        }
        
        .flame.lit {
            display: block;
        }

        @keyframes flicker {
            0% { transform: skewX(5deg) scaleY(1.1); }
            50% { transform: skewX(-5deg) scaleY(1.0); }
            100% { transform: skewX(5deg) scaleY(1.1); }
        }

        /* Decoration */
        .mascot-icon {
            font-size: 3rem;
            position: absolute;
            animation: bounce 2s infinite;
            z-index: 0;
        }
        .fish-icon { top: -40px; left: 0px; color: #4FC3F7; animation-delay: 0.2s; }
        .tiger-icon { top: -40px; right: 0px; color: #FF9800; animation-delay: 0.5s; }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }

        /* Canvas for Fireworks */
        #fireworksCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5; /* Behind text but over bg */
            pointer-events: none;
        }
        
        /* Card Content Layer (above fireworks) */
        .content-layer {
            position: relative;
            z-index: 20;
        }

    </style>
</head>
<body class="h-screen w-screen relative bg-gradient-to-b from-pink-100 to-red-50 flex flex-col items-center justify-center">

    <!-- Canvas for Fireworks (Always there but hidden initially) -->
    <canvas id="fireworksCanvas"></canvas>

    <!-- Page 1: Welcome & Photo -->
    <div id="page-1" class="absolute w-full max-w-md p-6 flex flex-col items-center transition-all duration-700 z-50">
        
        <h1 class="text-5xl font-bold text-pink-500 mb-2 hand-font drop-shadow-sm floating">Happy Birthday!</h1>
        <p class="text-pink-400 mb-8 hand-font text-xl">‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ô‡∏∞ üéâ</p>

        <!-- Photo Frame -->
        <div class="photo-frame rounded-xl w-64 h-72 relative mb-8 flex items-center justify-center bg-white border border-gray-200">
            <!-- Image Display -->
            <img id="userPhoto" src="https://placehold.co/400x500/pink/white?text=My+Photo" alt="Birthday Person" class="w-full h-full object-cover rounded-lg">
            
            <!-- Hidden File Input -->
            <input type="file" id="imageUpload" accept="image/*" class="hidden" onchange="loadFile(event)">
            
            <!-- Upload Label/Button -->
            <label for="imageUpload" class="photo-upload-btn text-pink-500 hover:text-pink-700 font-bold hand-font">
                <i class="fas fa-camera mr-1"></i> ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ
            </label>
        </div>

        <!-- Open Card Button -->
        <div class="text-center">
            <p class="mb-2 text-gray-500 text-sm">‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î</p>
            <button onclick="openCard()" 
                class="bg-gradient-to-r from-pink-400 to-red-400 text-white font-bold py-3 px-10 rounded-full shadow-lg hover:shadow-xl hover:scale-105 transition-all transform hand-font text-2xl">
                ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î üíå
            </button>
        </div>
    </div>

    <!-- Page 2: Cake & Fireworks -->
    <div id="page-2" class="absolute w-full h-full flex flex-col items-center justify-center hidden opacity-0 z-40">
        
        <div class="content-layer text-center w-full px-4">
            <h1 class="text-4xl md:text-5xl text-pink-600 font-bold drop-shadow-white mb-2 hand-font floating">Happy Birthday!</h1>
            
            <!-- The Cake -->
            <div class="cake-container transform scale-90 md:scale-100">
                <!-- Mascot Decoration -->
                <div class="mascot-icon fish-icon"><i class="fas fa-fish"></i></div>
                <div class="mascot-icon tiger-icon"><i class="fas fa-cat"></i></div>

                <div class="plate"></div>
                <div class="cake-body">
                    <div class="layer layer-bottom"></div>
                    <div class="layer layer-middle"></div>
                    <div class="icing">
                        <div class="drip"></div>
                        <div class="drip"></div>
                        <div class="drip"></div>
                        <div class="drip"></div>
                        <div class="drip"></div>
                        <div class="drip"></div>
                    </div>
                    <div class="layer layer-top"></div>
                </div>
                <!-- Fixed Candle inside cake-container -->
                <div class="candle">
                    <div class="flame" id="flame"></div>
                </div>
            </div>

            <!-- Wishes Container -->
            <div class="mt-16 max-w-lg mx-auto text-center p-6 bg-white/60 backdrop-blur-md rounded-2xl border-2 border-white shadow-xl relative z-50">
                <p id="wishText" class="text-pink-800 text-lg md:text-xl leading-relaxed hand-font font-semibold">
                    ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å‡πÜ ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á <br>
                    ‡∏™‡∏°‡∏´‡∏ß‡∏±‡∏á‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏ô‡∏∞ <br>
                    ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏õ‡∏•‡∏≤ üêü ‡πÅ‡∏•‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡πÄ‡∏™‡∏∑‡∏≠ üêØ <br>
                    ‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏ô‡∏≤‡∏ô‡πÜ ‡∏ô‡∏∞! ‚ù§Ô∏è
                </p>
            </div>

            <button onclick="location.reload()" class="mt-6 text-white/80 hover:text-white underline text-sm z-50 relative drop-shadow-md">
                <i class="fas fa-redo"></i> ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
            </button>
        </div>
    </div>

    <script>
        // --- Image Upload Logic ---
        function loadFile(event) {
            const output = document.getElementById('userPhoto');
            if(event.target.files && event.target.files[0]) {
                output.src = URL.createObjectURL(event.target.files[0]);
                output.onload = function() {
                    URL.revokeObjectURL(output.src) // free memory
                }
            }
        }

        // --- Transition Logic ---
        function openCard() {
            const page1 = document.getElementById('page-1');
            const page2 = document.getElementById('page-2');

            // Animate Page 1 out
            page1.classList.add('fade-out');

            setTimeout(() => {
                page1.classList.add('hidden');
                page2.classList.remove('hidden');
                page2.classList.add('fade-in');
                page2.style.opacity = '1';

                // Light the candle after a moment
                setTimeout(() => {
                    document.getElementById('flame').classList.add('lit');
                    startFireworks(); // Start fireworks when cake appears
                }, 800);

            }, 700);
        }

        // --- Fireworks Logic (Canvas) ---
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');
        let fireworks = [];
        let particles = [];
        let animationId;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        class Firework {
            constructor() {
                this.x = random(canvas.width * 0.1, canvas.width * 0.9);
                this.y = canvas.height;
                this.targetY = random(canvas.height * 0.1, canvas.height * 0.4);
                this.speed = random(3, 6);
                this.radius = 2;
                this.color = `hsl(${random(0, 360)}, 100%, 50%)`;
            }
            update() {
                this.y -= this.speed;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
            }
        }

        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.color = color;
                const angle = random(0, Math.PI * 2);
                const speed = random(1, 4);
                this.vx = Math.cos(angle) * speed;
                this.vy = Math.sin(angle) * speed;
                this.alpha = 1;
                this.decay = random(0.015, 0.03);
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.05; // gravity
                this.alpha -= this.decay;
            }
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.restore();
            }
        }

        function loop() {
            // Clear with trail effect
            ctx.fillStyle = 'rgba(255, 227, 227, 0.2)'; // Match bg color roughly
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Spawn fireworks
            if (random(0, 1) < 0.05) { // Chance to spawn
                fireworks.push(new Firework());
            }

            // Update Fireworks
            for (let i = fireworks.length - 1; i >= 0; i--) {
                fireworks[i].update();
                fireworks[i].draw();
                
                if (fireworks[i].y <= fireworks[i].targetY) {
                    // Explode
                    for (let j = 0; j < 30; j++) {
                        particles.push(new Particle(fireworks[i].x, fireworks[i].y, fireworks[i].color));
                    }
                    fireworks.splice(i, 1);
                }
            }

            // Update Particles
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update();
                particles[i].draw();
                if (particles[i].alpha <= 0) {
                    particles.splice(i, 1);
                }
            }

            animationId = requestAnimationFrame(loop);
        }

        function startFireworks() {
            if (!animationId) {
                loop();
            }
        }
    </script>
</body>
</html>
